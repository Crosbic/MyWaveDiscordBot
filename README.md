# My Wave

Discord бот для проигрывания музыки из Яндекс Музыки, включая персонализированную станцию "Моя волна".

## Описание

My Wave позволяет слушать музыку из Яндекс Музыки прямо в голосовых каналах Discord. Бот использует неофициальное API Яндекс Музыки для доступа к вашей персонализированной станции "Моя волна" и воспроизведения треков.

### Основные возможности

- Авторизация через Яндекс Музыку
- Воспроизведение персонализированной станции "Моя волна"
- Автоматическое воспроизведение следующих треков
- Отображение информации о текущем треке

## Требования

- Node.js 18.x или выше
- Discord аккаунт с правами администратора для добавления бота
- Аккаунт Яндекс с активной подпиской Яндекс Плюс

## Установка

1. Клонируйте репозиторий:

   ```
   git clone https://github.com/yourusername/ym-player-bot.git
   cd ym-player-bot
   ```

2. Установите зависимости:

   ```
   npm install
   ```

3. Создайте файл `.env` на основе `.env.template`:

   ```
   cp .env.template .env
   ```

4. Заполните файл `.env` необходимыми данными:

   ```
   # Токен Discord бота
   DISCORD_TOKEN=ваш_токен

   # ID клиента (приложения)
   CLIENT_ID=ваш_id

   # ID сервера для разработки если нужен
   DEV_GUILD_ID=ваш_id_сервера_для_разработки
   ```

5. Соберите проект:

   ```
   npm run build
   ```

6. Зарегистрируйте команды бота:

   ```
   npm run deploy
   ```

7. Запустите бота:
   ```
   npm start
   ```

## Получение токена Discord бота

1. Перейдите на [Discord Developer Portal](https://discord.com/developers/applications)
2. Нажмите "New Application" и создайте новое приложение
3. Перейдите во вкладку "Bot" и нажмите "Add Bot"
4. Скопируйте токен бота и добавьте его в файл `.env`
5. Во вкладке "OAuth2" > "URL Generator" выберите следующие разрешения:
   - Scopes: `bot`, `applications.commands`
   - Bot Permissions: `Send Messages`, `Connect`, `Speak`, `Use Voice Activity`
6. Используйте сгенерированную ссылку для добавления бота на ваш сервер

## Команды

| Команда          | Описание                                           |
| ---------------- | -------------------------------------------------- |
| `/login-help`    | Получить инструкции по авторизации через Яндекс    |
| `/login <token>` | Авторизация через Яндекс, используя токен          |
| `/logout`        | Выход из аккаунта Яндекс                           |
| `/my-wave`       | Воспроизвести треки из "Моя волна" в Яндекс Музыке |
| `/account-info`  | Показать информацию о подключенном аккаунте Яндекс |

## Использование

### Авторизация в Яндекс Музыке

1. Используйте команду `/login-help` для получения инструкций по авторизации
2. Перейдите по предоставленной ссылке и авторизуйтесь в Яндексе
3. После авторизации скопируйте токен из URL
4. Используйте команду `/login <ваш_токен>` для завершения авторизации

### Воспроизведение музыки

1. Подключитесь к голосовому каналу
2. Используйте команду `/my-wave` для начала воспроизведения вашей персонализированной станции
3. Бот автоматически будет воспроизводить следующие треки

## Примечания

- Для использования бота требуется активная подписка Яндекс Плюс
- Токен Яндекс действителен в течение года
- Бот может воспроизводить музыку только в голосовых каналах, к которым у него есть доступ

## Лицензия

Этот проект распространяется под лицензией MIT. Подробности смотрите в файле LICENSE.
